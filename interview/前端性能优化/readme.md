# 图片懒加载

- 性能优化
  首页加载速度
  http 并发数

- 懒加载

## 图片是否在可视区域

- getBoundingClientRect(),频繁调用影响性能
- 使用节流
- 性能开销大

## IntersectionObserver

用于异步观察目标元素与祖先元素或顶级文档视口（viewport）的交叉情况
通过设置 root 设置父元素（默认监听视口）,浏览器不支持可以使用 polyfill

- 异步观察者，监听元素交叉状态
- 可以监听多个元素，但是每个元素都需要单独绑定监听

- element.intersectionRatio > 0 &&
  element.intersectionRatio <=1 表示元素部分或全部可见

## 发布订阅模式 观察者模式

- 观察者模式：观察者模式定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。当主题对象的状态发生变化时，它会通知所有观察者对象，使它们能够自动更新。
  - 事件监听
  - 模型-视图（MVC）
  - 实时数据更新
- 发布订阅模式：发布者发送消息到消息代理，订阅者从消息代理接收消息。发布者和订阅者之间没有直接的依赖关系。
  - 低耦合，无依赖关系
  - 事件总线：组件通信
  - 消息队列
